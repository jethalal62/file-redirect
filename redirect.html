<script>
    // 1. Initialize Supabase FIRST
    const SUPABASE_URL = 'https://your-project.supabase.co';
    const SUPABASE_KEY = 'your-anon-key';
    const supabaseClient = supabase.createClient(https://itrvfwwxjoedvrmhkkvi.supabase.co,eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml0cnZmd3d4am9lZHZybWhra3ZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA1NzIwMTYsImV4cCI6MjA1NjE0ODAxNn0.-XZZTiEBhy75cIWo_IpcYFWET7ckSfu0b6l4-ev0S0s);

    document.addEventListener('DOMContentLoaded', async () => {
        try {
            // 2. Use the pre-initialized client
            const urlParams = new URLSearchParams(window.location.search);
            const movieId = urlParams.get('id');

            const { data: movie, error } = await supabaseClient
                .from('movies')
                .select('*')
                .eq('id', movieId)
                .single();

            // 3. Update buttons using the movie data
            if (movie) {
                document.getElementById('telegramBtn').href = movie.telegram_url;
                document.getElementById('cloudBtn').href = movie.cloud_download_url;
                document.getElementById('streamBtn').href = movie.streamhg_url;
            }

        } catch (error) {
            console.error('Error:', error);
            // Add your error handling here
        }
    });
</script>
